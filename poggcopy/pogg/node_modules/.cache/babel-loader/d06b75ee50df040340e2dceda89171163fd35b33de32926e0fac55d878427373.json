{"ast":null,"code":"import Parse from \"parse\";\nimport axios from \"axios\";\nexport const getMatches = puuid => {\n  // Abstraction using axios\n  return axios.get(`https://americas.api.riotgames.com/lol/match/v5/matches/by-puuid/${puuid}/ids?start=0&count=5&api_key=RGAPI-e56b40e6-664c-4752-a91d-22bac12be6d4`).then(response => response.data)\n  // Error handling if summoner name not found\n  .catch(error => {\n    alert(\"Error fetching summoner data\");\n    return null;\n  });\n};\nexport const populateMatches = (matchList, activeSumm) => {\n  for (var i in matchList) {\n    singleMatch(matchList[i]).then(matchdata => buildMatch(matchdata, activeSumm));\n  }\n};\nexport const singleMatch = matchId => {\n  return axios.get(`https://americas.api.riotgames.com/lol/match/v5/matches/${matchId}?api_key=RGAPI-e56b40e6-664c-4752-a91d-22bac12be6d4`).then(response => response.data)\n  // Error handling if summoner name not found\n  .catch(error => {\n    alert(\"Error fetching match data\");\n    return null;\n  });\n};\nexport const buildMatch = (matchdata, activeSumm) => {\n  var win = false;\n  for (var i in matchdata.info.participants) {\n    if (matchdata.info.participants[i].summonerName.trim() === activeSumm.attributes.summonername.trim()) {\n      win = matchdata.info.participants[i].win;\n    }\n  }\n  const Match = Parse.Object.extend(\"Match\");\n  const match = new Match();\n  // using setter to UPDATE the object\n  match.set(\"matchid\", matchdata.metadata.matchId);\n  match.set(\"gamemode\", matchdata.info.gameMode);\n  match.set(\"summonertomatch\", activeSumm);\n  match.set(\"win\", win);\n  notInDB(matchdata.metadata.matchId, activeSumm).then(res => {\n    if (res) {\n      return match.save();\n    }\n  });\n};\n\n//check if already in DB before adding\nexport const notInDB = (mid, summ) => {\n  const Match = Parse.Object.extend(\"Match\");\n  var query = new Parse.Query(Match);\n  query.equalTo(\"matchid\", mid);\n  query.equalTo(\"summonertomatch\", summ);\n  return query.first().then(function (summ) {\n    if (summ) {\n      console.log(\"found in db\");\n      return false;\n    } else {\n      console.log(\"not in db\");\n      return true;\n    }\n  });\n};\nexport const getMatchesBySumm = summ => {\n  const Match = Parse.Object.extend(\"Match\");\n  const query = new Parse.Query(Match);\n  query.equalTo(\"summonertomatch\", summ);\n  return query.find().then(results => {\n    // returns array of Match objects\n    console.log(results);\n    return results;\n  });\n};","map":{"version":3,"names":["Parse","axios","getMatches","puuid","get","then","response","data","catch","error","alert","populateMatches","matchList","activeSumm","i","singleMatch","matchdata","buildMatch","matchId","win","info","participants","summonerName","trim","attributes","summonername","Match","Object","extend","match","set","metadata","gameMode","notInDB","res","save","mid","summ","query","Query","equalTo","first","console","log","getMatchesBySumm","find","results"],"sources":["/home/mspadafo/compsci/MWD/mwd-pogg/poggcopy/pogg/src/Services/MatchService.js"],"sourcesContent":["import Parse from \"parse\";\r\nimport axios from \"axios\";\r\n\r\nexport const getMatches = (puuid) => {\r\n  // Abstraction using axios\r\n  return (\r\n    axios\r\n      .get(\r\n        `https://americas.api.riotgames.com/lol/match/v5/matches/by-puuid/${puuid}/ids?start=0&count=5&api_key=RGAPI-e56b40e6-664c-4752-a91d-22bac12be6d4`\r\n      )\r\n      .then((response) => response.data)\r\n      // Error handling if summoner name not found\r\n      .catch((error) => {\r\n        alert(\"Error fetching summoner data\");\r\n        return null;\r\n      })\r\n  );\r\n};\r\n\r\nexport const populateMatches = (matchList, activeSumm) => {\r\n  for (var i in matchList) {\r\n    singleMatch(matchList[i]).then((matchdata) =>\r\n      buildMatch(matchdata, activeSumm)\r\n    );\r\n  }\r\n};\r\n\r\nexport const singleMatch = (matchId) => {\r\n  return (\r\n    axios\r\n      .get(\r\n        `https://americas.api.riotgames.com/lol/match/v5/matches/${matchId}?api_key=RGAPI-e56b40e6-664c-4752-a91d-22bac12be6d4`\r\n      )\r\n      .then((response) => response.data)\r\n      // Error handling if summoner name not found\r\n      .catch((error) => {\r\n        alert(\"Error fetching match data\");\r\n        return null;\r\n      })\r\n  );\r\n};\r\n\r\nexport const buildMatch = (matchdata, activeSumm) => {\r\n  var win = false;\r\n  for (var i in matchdata.info.participants) {\r\n    if (\r\n      matchdata.info.participants[i].summonerName.trim() ===\r\n      activeSumm.attributes.summonername.trim()\r\n    ) {\r\n      win = matchdata.info.participants[i].win;\r\n    }\r\n  }\r\n\r\n  const Match = Parse.Object.extend(\"Match\");\r\n  const match = new Match();\r\n  // using setter to UPDATE the object\r\n  match.set(\"matchid\", matchdata.metadata.matchId);\r\n  match.set(\"gamemode\", matchdata.info.gameMode);\r\n  match.set(\"summonertomatch\", activeSumm);\r\n  match.set(\"win\", win);\r\n  notInDB(matchdata.metadata.matchId, activeSumm).then((res) => {\r\n    if (res) {\r\n      return match.save();\r\n    }\r\n  });\r\n};\r\n\r\n//check if already in DB before adding\r\nexport const notInDB = (mid, summ) => {\r\n  const Match = Parse.Object.extend(\"Match\");\r\n  var query = new Parse.Query(Match);\r\n  query.equalTo(\"matchid\", mid);\r\n  query.equalTo(\"summonertomatch\", summ);\r\n  return query.first().then(function (summ) {\r\n    if (summ) {\r\n      console.log(\"found in db\");\r\n      return false;\r\n    } else {\r\n      console.log(\"not in db\");\r\n      return true;\r\n    }\r\n  });\r\n};\r\n\r\nexport const getMatchesBySumm = (summ) => {\r\n  const Match = Parse.Object.extend(\"Match\");\r\n  const query = new Parse.Query(Match);\r\n  query.equalTo(\"summonertomatch\", summ);\r\n  return query.find().then((results) => {\r\n    // returns array of Match objects\r\n    console.log(results);\r\n    return results;\r\n  });\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}